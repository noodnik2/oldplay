#if 0

	sasc2ebc.c			Convert TEXT from EBCDIC to ASCII
					Copyright (C) 1989, by ==C=R=C==


	c= sebc2asc(c)			Translate c from EBCDIC to ASCII
	flag= isebctext(c)		Return 0 only if not EBCDIC text


	Translates characters in the file:
	(includes a space at the end)

	   0       8       1       8
	   ABCDEFGHIJKLMNOPQRSTUVWXYZ
	   abcdefghijklmnopqrstuvwxyz
	   1234567890~|@#$%^&*()_+`-=
	   !|\112\:"{}';/.,<>?[] 	/* note: \112 is EBCDIC cent sign */

	Size of translation table: 97 characters.

#endif

#include	"../compiler/compiler.h"

static chau sebctbl[]= { 			/* input table */
	0xc1, 0xc2, 0xc3, 0xc4, 0xc5, 0xc6, 0xc7, 0xc8,
	0xc9, 0xd1, 0xd2, 0xd3,	0xd4, 0xd5, 0xd6, 0xd7,
	0xd8, 0xd9, 0xe2, 0xe3,	0xe4, 0xe5, 0xe6, 0xe7,
	0xe8, 0xe9,
	
	0x81, 0x82, 0x83, 0x84, 0x85, 0x86, 0x87, 0x88,
	0x89, 0x91, 0x92, 0x93, 0x94, 0x95, 0x96, 0x97,
	0x98, 0x99, 0xa2, 0xa3, 0xa4, 0xa5, 0xa6, 0xa7,
	0xa8, 0xa9,

	0xf1, 0xf2, 0xf3, 0xf4, 0xf5, 0xf6, 0xf7, 0xf8,
	0xf9, 0xf0, 0xa1, 0x4f, 0x7c, 0x7b, 0x5b, 0x6c,
	0x5f, 0x50, 0x5c, 0x4d, 0x5d, 0x6d, 0x4e, 0x79,
	0x60, 0x7e,

	0x5a, 0x6a, 0x4a, 0xe0, 0x7a, 0x7f, 0xc0, 0xd0,
	0x7d, 0x5e, 0x61, 0x4b, 0x6b, 0x4c, 0x6e, 0x6f,
	0xad, 0xbd, 0x40

} ;

static char asctbl[sizeof(sebctbl)+1]= {

"\
ABCDEFGHIJKLMNOPQRSTUVWXYZ\
abcdefghijklmnopqrstuvwxyz\
1234567890~|@#$%^&*()_+`-=\
!|\112\\:\"{}';/.,<>?[] \
"

} ;				/* ASSUME COMPILED ON ASCII MACHINE! */

char *memchr() ;

int sebc2asc(c)
int c;
{
	register chau *p;

	p= (chau *)memchr(&sebctbl[0], (char)c, sizeof(sebctbl)) ;
	if (p==(chau *)NULL) {
#if 0
		printf("not in ebcdic table: 0x%02x\n", c);
#endif
		return(c);
	}
	return((int) asctbl[(int)(p-sebctbl)]);
}

int isebctxt(c)
int c;
{
	if (memchr(&sebctbl[0], (char)c, sizeof(sebctbl))==(char *)NULL) {
		return(0);
	}
	return(1);
}
